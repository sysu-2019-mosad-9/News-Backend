language: rust
rust:
  - nightly
  - nightly-2019-11-13
cache: cargo

jobs:
  allow_failures:
    - rust: nightly
  include:
    - rust: nightly-2019-11-13
      before_script:
        - rustup component add rustfmt
        - rustup component add clippy
      script:
        - cargo fmt -- --check
        - cargo clippy --all-targets -- -D warnings
        - cargo build --verbose
